const translations = {
  en: {
    meta_title: 'Havoc IT Consulting | Enterprise Infrastructure & Security',
    meta_description:
      'Trusted IT consulting across Romania and international enterprises, focused on secure infrastructure, automation, and digital transformation.',
    nav_expertise: 'Expertise',
    nav_about: 'About',
    nav_testimonials: 'Testimonials',
    nav_contact: 'Contact',
    nav_cta: 'Get Started',
    hero_title: 'Empowering Your IT Future',
    hero_subtitle: 'Trusted IT consulting and innovative solutions to drive your success.',
    trust_badge: '13+ years securing infrastructure for Romanian and international enterprises.',
    trust_item1: 'Global delivery with Atos, NTT Data & SAP heritage',
    trust_item2: 'Partnered with Romanian leaders like FCC Construction & Astaldi',
    cta_button: 'Get Started',
    cta_secondary: 'View Expertise',
    features_title: 'Our Expertise',
    feature1_title: 'Cybersecurity',
    feature1_desc:
      'Protect your data and infrastructure with comprehensive security assessments and solutions.',
    feature2_title: 'IT Infrastructure',
    feature2_desc: 'Design, deploy, and manage robust IT systems that scale with your business.',
    feature3_title: 'Digital Transformation',
    feature3_desc: 'Leverage cloud, automation, and modern tech to accelerate your digital journey.',
    about_title: 'About Us',
    about_summary:
      'Havoc IT Consulting was founded by two senior technology consultants with over 13 years of combined professional experience in IT infrastructure, security and enterprise operations.',
    about_rom_title: 'Romanian Clients and Engagements',
    about_rom_text:
      'Throughout their careers, the founders have been involved in projects for key Romanian organizations, including major infrastructure and construction companies such as FCC Construction, Astaldi S.p.A. and Straco Group, as well as Maragro S.R.L. They have also collaborated with professional services and accounting firms across Romania, and supported public institutions such as schools and municipal government bodies.',
    about_int_title: 'International Experience',
    about_int_text:
      'At an international level, our consultants have worked within global consultancy organizations such as Atos, NTT Data and SAP, contributing to projects for large enterprise clients including Swiss Life, Toll Collect, Evergreen, Carl Zeiss, Helvetia, Hugo Boss, Wintershall, Novozymes and Thales.',
    about_conclusion:
      'Havoc IT Consulting builds on this individual experience to deliver structured, secure and forward-looking IT services, with a strong focus on automation and the integration of AI-driven technologies to support scalable and efficient business operations.',
    testimonials_title: 'What Our Clients Say',
    testimonial1:
      '"Havoc modernized our entire infrastructure. We went from legacy systems to a secure, cloud‑native environment without a hitch."',
    testimonial1_author: '- Enterprise Client',
    testimonial2: '"Their team unlocked new efficiencies and helped us automate our workflows. The ROI was immediate."',
    testimonial2_author: '- Mid‑Size Business',
    cta_strip_title: 'Ready when you are',
    cta_strip_heading: 'Let’s align your IT roadmap with measurable outcomes.',
    cta_strip_button: 'Talk to us',
    contact_title: 'Contact Us',
    contact_subtitle: "Ready to grow? Fill out the form below and we'll get back to you soon.",
    contact_name: 'Your Name',
    contact_email: 'Your Email',
    contact_message: 'Your Message',
    contact_button: 'Send Message',
    contact_button_sending: 'Opening email…',
    footer_text: '© 2025 Havoc IT Consulting. All rights reserved.',
    feedback_success: 'Opening your email client. If it does not open, contact office@havoc-it.ro.',
    feedback_error: 'Please complete the required fields before sending.',
    feedback_spam: 'Submission blocked. Please leave the optional field blank.',
    structured_description:
      'Trusted IT consulting across Romania and international enterprises, focused on secure infrastructure, automation, and digital transformation.'
  },
  ro: {
    meta_title: 'Havoc IT Consulting | Infrastructură Enterprise și Securitate',
    meta_description:
      'Consultanță IT de încredere în România și la nivel internațional, axată pe infrastructură sigură, automatizare și transformare digitală.',
    nav_expertise: 'Expertiză',
    nav_about: 'Despre',
    nav_testimonials: 'Testimoniale',
    nav_contact: 'Contact',
    nav_cta: 'Începe',
    hero_title: 'Modelăm viitorul tău IT',
    hero_subtitle: 'Consultanță IT de încredere și soluții inovatoare pentru succesul tău.',
    trust_badge: '13+ ani de experiență în infrastructură și securitate pentru clienți locali și internaționali.',
    trust_item1: 'Livrăm global cu experiență Atos, NTT Data și SAP',
    trust_item2: 'Parteneri pentru lideri români precum FCC Construction și Astaldi',
    cta_button: 'Începe',
    cta_secondary: 'Vezi expertiza',
    features_title: 'Expertiza Noastră',
    feature1_title: 'Securitate cibernetică',
    feature1_desc: 'Protejează-ți datele și infrastructura cu evaluări și soluții de securitate complete.',
    feature2_title: 'Infrastructură IT',
    feature2_desc: 'Proiectăm, implementăm și gestionăm sisteme IT robuste care cresc odată cu afacerea ta.',
    feature3_title: 'Transformare digitală',
    feature3_desc: 'Valorifică cloud-ul, automatizarea și tehnologiile moderne pentru a accelera transformarea digitală.',
    about_title: 'Despre Noi',
    about_summary:
      'Havoc IT Consulting a fost fondată de doi consultanți seniori cu peste 13 ani de experiență în infrastructură IT, securitate și operațiuni enterprise.',
    about_rom_title: 'Clienți și proiecte în România',
    about_rom_text:
      'Fondatorii au fost implicați în proiecte pentru organizații cheie din România, inclusiv FCC Construction, Astaldi S.p.A. și Straco Group, precum și Maragro S.R.L. Au colaborat cu firme de servicii profesionale și instituții publice, inclusiv școli și primării.',
    about_int_title: 'Experiență internațională',
    about_int_text:
      'La nivel internațional, consultanții noștri au lucrat în organizații globale precum Atos, NTT Data și SAP, contribuind la proiecte pentru clienți enterprise precum Swiss Life, Toll Collect, Carl Zeiss, Helvetia, Hugo Boss, Wintershall, Novozymes și Thales.',
    about_conclusion:
      'Valorificăm această experiență pentru a livra servicii IT structurate, sigure și orientate spre viitor, cu un accent puternic pe automatizare și integrarea tehnologiilor bazate pe inteligență artificială.',
    testimonials_title: 'Ce spun clienții noștri',
    testimonial1:
      '"Havoc ne-a modernizat întreaga infrastructură. Am trecut de la sisteme vechi la un mediu cloud‑nativ securizat fără probleme."',
    testimonial1_author: '- Client Enterprise',
    testimonial2: '"Echipa lor a adus noi eficiențe și ne-a ajutat să automatizăm fluxurile de lucru. ROI-ul a fost imediat."',
    testimonial2_author: '- Afacere medie',
    cta_strip_title: 'Gata când ești tu',
    cta_strip_heading: 'Aliniem strategia IT la rezultate măsurabile.',
    cta_strip_button: 'Hai să vorbim',
    contact_title: 'Contactează‑ne',
    contact_subtitle: 'Ești gata să crești? Completează formularul și te vom contacta în scurt timp.',
    contact_name: 'Numele tău',
    contact_email: 'Email-ul tău',
    contact_message: 'Mesajul tău',
    contact_button: 'Trimite Mesaj',
    contact_button_sending: 'Se deschide email-ul…',
    footer_text: '© 2025 Havoc IT Consulting. Toate drepturile rezervate.',
    feedback_success: 'Deschidem clientul de email. Dacă nu se deschide, contactează office@havoc-it.ro.',
    feedback_error: 'Completează câmpurile obligatorii înainte de a trimite.',
    feedback_spam: 'Trimiterea a fost blocată. Lasă câmpul opțional necompletat.',
    structured_description:
      'Consultanță IT de încredere în România și la nivel internațional, axată pe infrastructură sigură, automatizare și transformare digitală.'
  }
};

const metaSelectors = {
  title: 'meta[property="og:title"]',
  description: 'meta[name="description"]',
  ogDescription: 'meta[property="og:description"]',
  twitterTitle: 'meta[name="twitter:title"]',
  twitterDescription: 'meta[name="twitter:description"]'
};

const STORAGE_KEY = 'havoc_lang';

function updateStructuredData(description) {
  const script = document.getElementById('org-schema');
  if (!script) return;
  const data = {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    name: 'Havoc IT Consulting',
    url: 'https://www.havoc-it.ro/',
    description,
    address: { '@type': 'PostalAddress', addressCountry: 'Romania' },
    sameAs: [
      'https://www.linkedin.com/company/havoc-it-consulting',
      'https://www.facebook.com/havocitconsulting'
    ]
  };
  script.textContent = JSON.stringify(data, null, 2);
}

function setLanguage(lang) {
  const dict = translations[lang] || translations.en;
  const htmlEl = document.documentElement;
  htmlEl.lang = lang;
  Object.entries(dict).forEach(([key, value]) => {
    const element = document.getElementById(key);
    if (!element) return;
    if (key.startsWith('contact_') && key !== 'contact_title' && key !== 'contact_subtitle' && key !== 'contact_button' && key !== 'contact_button_sending') {
      element.placeholder = value;
    } else {
      element.textContent = value;
    }
  });

  document.title = dict.meta_title;
  const metaDescription = document.querySelector('meta[name="description"]');
  if (metaDescription) metaDescription.setAttribute('content', dict.meta_description);
  const ogDesc = document.querySelector(metaSelectors.ogDescription);
  if (ogDesc) ogDesc.setAttribute('content', dict.meta_description);
  const twitterDesc = document.querySelector(metaSelectors.twitterDescription);
  if (twitterDesc) twitterDesc.setAttribute('content', dict.meta_description);
  const ogTitle = document.querySelector(metaSelectors.title);
  if (ogTitle) ogTitle.setAttribute('content', dict.meta_title);
  const twitterTitle = document.querySelector(metaSelectors.twitterTitle);
  if (twitterTitle) twitterTitle.setAttribute('content', dict.meta_title);

  document.getElementById('lang-en').classList.toggle('active', lang === 'en');
  document.getElementById('lang-ro').classList.toggle('active', lang === 'ro');

  localStorage.setItem(STORAGE_KEY, lang);
  updateStructuredData(dict.structured_description);
}

function validateEmail(email) {
  return /\S+@\S+\.\S+/.test(email);
}

function handleFormSubmit(event) {
  event.preventDefault();
  const lang = localStorage.getItem(STORAGE_KEY) || 'en';
  const dict = translations[lang] || translations.en;
  const nameEl = document.getElementById('contact_name');
  const emailEl = document.getElementById('contact_email');
  const messageEl = document.getElementById('contact_message');
  const honeypotEl = document.getElementById('contact_company');
  const feedbackEl = document.getElementById('contact_feedback');
  const button = document.getElementById('contact_button');

  const errors = [];
  if (honeypotEl.value.trim() !== '') {
    feedbackEl.textContent = dict.feedback_spam;
    return;
  }
  if (!nameEl.value.trim()) errors.push('name');
  if (!validateEmail(emailEl.value.trim())) errors.push('email');
  if (messageEl.value.trim().length < 10) errors.push('message');

  if (errors.length) {
    feedbackEl.textContent = dict.feedback_error;
    const focusTarget =
      (errors.includes('name') && nameEl) ||
      (errors.includes('email') && emailEl) ||
      (errors.includes('message') && messageEl);
    if (focusTarget) focusTarget.focus();
    return;
  }

  button.disabled = true;
  const originalText = button.textContent;
  button.textContent = dict.contact_button_sending;
  feedbackEl.textContent = dict.feedback_success;

  const subject = encodeURIComponent('Website contact request');
  const body = encodeURIComponent(`Name: ${nameEl.value.trim()}\nEmail: ${emailEl.value.trim()}\n\n${messageEl.value.trim()}`);
  window.location.href = `mailto:office@havoc-it.ro?subject=${subject}&body=${body}`;

  setTimeout(() => {
    button.disabled = false;
    button.textContent = originalText;
  }, 1200);
}

function initLanguageToggle() {
  const storedLang = localStorage.getItem(STORAGE_KEY) || 'en';
  setLanguage(storedLang);

  document.getElementById('lang-en').addEventListener('click', (e) => {
    e.preventDefault();
    setLanguage('en');
  });
  document.getElementById('lang-ro').addEventListener('click', (e) => {
    e.preventDefault();
    setLanguage('ro');
  });

  const contactForm = document.querySelector('#contact form');
  const contactButton = document.getElementById('contact_button');

  const handleContact = (event) => {
    if (event) {
      event.preventDefault();
    }

    const name = document.getElementById('contact_name').value.trim();
    const email = document.getElementById('contact_email').value.trim();
    const message = document.getElementById('contact_message').value.trim();

    const subject = encodeURIComponent('Website contact request');
    const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\n${message}`);

    window.location.href = `mailto:office@havoc-it.ro?subject=${subject}&body=${body}`;
  };

  if (contactForm) {
    contactForm.addEventListener('submit', handleContact);
  }

  if (contactButton) {
    contactButton.addEventListener('click', handleContact);
  }
});
